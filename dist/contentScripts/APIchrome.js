class easyMethods{contructor(){}on(e,t,n){return e.addEventListener(t,()=>{n()},!1)}animate(e,t,n,o,s=!1,r=200){r/=1e3;let a={end:n,start:t};e.toggleAction||(e.toggleAction="open"),1==s&&("close"==e.toggleAction?(e.toggleAction="open",n=a.start,t=a.end):(e.toggleAction="close",n=a.end,t=a.start)),e.style.transition="all "+r+"s ease-in-out";for(let n in t)e.style[n]=t[n];e.toggle&&clearTimeout(e.toggle),e.toggle=setTimeout(function(){for(let t in n)e.style[t]=n[t]},o)}css(e,t,n=null){if("object"==typeof t)for(let n in t)if(e.tagName)e.style[n]=t[n];else for(let o in e)e[o].style[n]=t[n];else if(e.tagName)e.style[t]=n;else for(let o in e)e[o].style[t]=n}}class APIchrome extends easyMethods{constructor(){super();let e={protocol:"chrome:",hostname:"chrome.google.com"};this.filter=(t=>{let n=new URL(t.url);if(t.title==n.hostname)return!1;for(let t in e)if(n[t]==e[t])return!1;return!0})}URL(e){return chrome.runtime.getURL(e)}send(e,t=null,n=null){null==t?chrome.runtime.sendMessage(e):chrome.tabs.sendMessage(t,e),e.response&&this.onMessages({[e.response]:e=>{null!=n&&n(e)}})}sendReceive(e,t=null){return new Promise((n,o)=>{e.response="await",null==t?chrome.runtime.sendMessage(e,function(e){n(e)}):chrome.tabs.sendMessage(t,e,function(e){n(e)})})}async exeScript(e,t,n=100){return new Promise((o,s)=>{let r;chrome.tabs.executeScript(e,t,function(e){r=null,o(e)}),r=setTimeout(function(){o("timeout")},n)})}async getTab(e={}){return"active"==e&&(e={active:!0,lastFocusedWindow:!0}),await new Promise((t,n)=>{"number"==typeof e?chrome.tabs.get(e,e=>{t(e&&e.url?e:"empty")}):chrome.tabs.query(e,e=>{t(e&&e.length>0?e:"empty")})})}async getStorage(e=null){return await new Promise(async(t,n)=>{chrome.storage.sync.get(e,n=>{n=null==e?n:n[e],t(n?n:"empty")})})}async setStorage(e,t){let n=await this.getStorage(e);return new Promise((o,s)=>{chrome.storage.sync.set({[e]:t},function(){o(n=={}?"setted":"modified")})})}async removeStorage(e=null){return new Promise((t,n)=>{e?chrome.storage.sync.remove(e,function(){t()}):chrome.storage.sync.clean(function(){t()})})}async onUpdated(e){chrome.tabs.onUpdated.addListener((t,n)=>{if("complete"==n.status)for(let o in e)e[o]({tabId:t,info:n})})}onMessages(e){e&&chrome.runtime.onMessage.addListener(async(t,n,o)=>{let s=!0;for(let n in e)if(t.action){if(t.action==n){e[n](t),s=!1;break}}else if(t.verifyURL){e.verifyURL(t),s=!1;break}1==s&&e.default&&e.default(t)})}}