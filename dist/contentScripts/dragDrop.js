class dragDrop extends APIchrome{constructor(){super(),this.dataEvents={},this.principalElement=document.body,this.searchPrincial=!1,this.idDrag,this.idDrop}setData(t,e){this.dataEvents[t]=e}getData(t){return this.dataEvents[t]}clearData(){this.dataEvents={}}onDrag(t,e){let a="#"+t,r="#"+e;const s=t=>{let e=document.querySelectorAll(t);return e.on=((t,a=null)=>{e.forEach((e,r)=>{"dragstart"==t&&e.setAttribute("draggable","true"),e.mouseX=function(t){let e=this.getBoundingClientRect();return Math.round(t.clientX-e.left)},e.mouseY=function(t){let e=this.getBoundingClientRect();return Math.round(t.clientY-e.top)},e.addEventListener(t,e=>this[t](e,a),!1)})}),e};s(a).on("dragend"),s(a).on("dragstart",{idDrag:t,idDrop:e}),s(r).on("dragover")}searchPrincialElement(){let t=document.body.clientHeight,e=document.body;return document.querySelectorAll("body > *").forEach(function(a,r){a.clientHeight&&a.clientHeight>t&&"areaEx0A"!=a.classList[0]&&(t=a.clientHeight,e=a)}),e}dragstart(t,e){if(this.clearData(),t.target.mouseX){0==this.searchPrincial&&(this.principalElement=this.searchPrincialElement(),this.searchPrincial=!0);let a={props_global:()=>{this.setData("drag",t.target),this.setData("areaDrop",document.getElementById(e.idDrop))},css_start:()=>{this.getData("areaDrop").style.visibility="visible",this.getData("areaDrop").style.height=this.principalElement.clientHeight+"px"},preventGhost:()=>{let e=document.createElement("img");t.dataTransfer.setDragImage(e,0,0)}};a.props_global(),a.css_start(),this.setData("x",t.target.mouseX(t)),this.setData("y",t.target.mouseY(t)),a.preventGhost()}else t.preventDefault()}dragend(t,e){this.getData("areaDrop").style.visibility="hidden"}dragover(t,e){let a={area:this.getData("areaDrop"),move:e=>{this.getData("drag").style.top=e.mouseY(t)-this.getData("y")+"px",this.getData("drag").style.left=e.mouseX(t)-this.getData("x")+"px"},setDropZones(e){let a=!1;for(let r in e)if(e[r]==t.target.classList[0]){a=!0;break}1==a&&t.preventDefault()}};a.move(a.area),a.setDropZones(["areaEx0A","noteEx0A","paperEx0A","tackEx0A"])}}